var videos=new VideoList;videos.reset(bootstrappedVideos);var videoView=new VideoListView({attributes:{title:"My Video Library"},collection:videos}),newNote='<form id="submit-note"><textarea class="new-note" placeholder="Note..."></textarea><button type="submit" class="btn btn-primary submit-note-btn">Save</button><form>';$(function(){videoView.render(),$("body").append(videoView.el),$(document).on("click",".toggle-new-note",function(){var e=$(this).closest("li"),t=e.find("video"),i=t.attr("id"),o=document.getElementById(i);o.pause();var n=e.find("table.list-notes");n.append(newNote),$(document).on("submit","#submit-note",function(e){e.preventDefault();var t=$(this).find("textarea").val(),i=$(this).find("table");console.log(i),$(i.selector).append('<tr class="note-row"><td>'+t+"</td><td>"),console.log(o.currentTime),console.log(t),this.remove()})}),$(document).on("click",".deleteVideo",function(){var e=$(this).closest("li"),t=e.attr("data-video-container");$.post("/deleteVideo",{id:t},function(t){console.log("responseData: ",t),t.success===!0&&e.remove()})})});var VideoList=Backbone.Collection.extend({model:Video,url:"/videos"}),Video=Backbone.Model.extend({idAttributes:"_id",defaults:{title:"Why Internet Explorer is the best",videoSrc:"",notes:[{time:0,note:""}]}}),VideoListView=Backbone.View.extend({template:Handlebars.compile($("#video-list").html()),initialize:function(){this.setElement(this.template(this.attributes)),this.listenTo(this.collection,"all",this.render)},render:function(){var e=this.collection.map(function(e){var t=new VideoView({model:e});return t.render(),t.el});this.$(".videos").empty().append(e)}}),VideoView=Backbone.View.extend({template:Handlebars.compile($("#video-tpl").html()),render:function(){this.setElement(this.template(this.model.toJSON()))},events:{"click .deleteVideo":"deleteVideo"},deleteVideo:function(){console.log(this.model.attributes._id),this.model.destroy()}});